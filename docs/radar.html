<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Radar Humano</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<button onclick="window.location.href='index.html'" class="btn">Voltar</button>
<canvas id="map" style="width:100vw;height:100vh;"></canvas>
<script>
const c=document.getElementById("map");
const ctx=c.getContext("2d");
function size(){c.width=innerWidth;c.height=innerHeight;} size();onresize=size;

let nodes=JSON.parse(localStorage.getItem("nodes")||"[]");
if(nodes.length<40){
  nodes.push({x:Math.random()*c.width,y:Math.random()*c.height,t:Date.now()});
  localStorage.setItem("nodes",JSON.stringify(nodes));
}
setInterval(()=>{
  if(nodes.length>=120)return;
  nodes.push({x:Math.random()*c.width,y:Math.random()*c.height,t:Date.now()});
  localStorage.setItem("nodes",JSON.stringify(nodes));
},20000);

function draw(){
  ctx.clearRect(0,0,c.width,c.height);
  nodes.forEach((n,i)=>{
    ctx.beginPath();ctx.fillStyle="rgba(255,235,180,0.8)";
    ctx.arc(n.x,n.y,3,0,Math.PI*2);ctx.fill();
    for(let j=i+1;j<nodes.length;j++){
      let m=nodes[j],dist=Math.hypot(n.x-m.x,n.y-m.y);
      if(dist<150){
        ctx.strokeStyle=`rgba(255,235,180,${1-dist/150})`;
        ctx.beginPath();ctx.moveTo(n.x,n.y);ctx.lineTo(m.x,m.y);ctx.stroke();
      }
    }
  });
  requestAnimationFrame(draw);
}
draw();
</script>
</body>
</html>
