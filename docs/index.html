<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HUMAN Protocol</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

<!-- ðŸŽµ AUDIO AMBIENTE -->
<audio id="bgm" autoplay loop>
  <source src="https://files.freemusicarchive.org/storage-freemusicarchive-org/music/Oddio_Overplay/Monplaisir/Land_of_Bliss/Monplaisir_-_07_-_Moon_Bshine.mp3" type="audio/mpeg">
</audio>
<div class="audio-toggle" onclick="toggleAudio()">ðŸ”Š</div>

<!-- LANGUAGE SWITCH -->
<div class="lang-switch">
  <button onclick="setLang('pt')">PT</button>
  <span>|</span>
  <button onclick="setLang('en')">EN</button>
</div>

<!-- HERO -->
<header class="hero">
  <img src="hum-logo.png" alt="HUM Logo" class="logo">
  <h1>HUMAN</h1>
  <p class="tagline"
     data-pt="PresenÃ§a humana registada no tempo."
     data-en="Human presence recorded across time."></p>
</header>

<main>

<!-- (resto Ã© igualâ€¦ manifesto, intent, o que Ã©, etcâ€¦) -->

<!-- ðŸ”¥ GRÃFICO LIVE -->
<section class="card slide">
  <h2 data-pt="DistribuiÃ§Ã£o ao Vivo"
      data-en="Live Distribution"></h2>
  <canvas id="humChart" width="400" height="200"></canvas>
</section>

<!-- ðŸ“± APPS (igual ao anterior) -->

<!-- ðŸŒ± FUTURO (igual) -->

<!-- ðŸ§  TERMINAL SECRETO -->
<section class="card slide">
  <h2 data-en="Secret Terminal" data-pt="Terminal Secreto"></h2>
  <p data-pt="Prima ~ para abrir."
     data-en="Press ~ to open."></p>
</section>

</main>

<footer>
  <p data-pt="HUMAN Protocol â€” presenÃ§a humana no tempo"
     data-en="HUMAN Protocol â€” human presence over time"></p>
</footer>

<!-- TERMINAL UI -->
<div id="terminal" class="terminal hidden">
  <pre id="term-output"></pre>
  <input id="term-input" type="text" autocomplete="off" placeholder="> comando">
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
// ðŸŒ Multi-idioma
function setLang(lang) {
  localStorage.setItem("human_lang", lang);
  document.querySelectorAll("[data-pt]").forEach(el => el.innerHTML = el.dataset[lang]);
}
setLang(localStorage.getItem("human_lang") || "pt");

// ðŸŽµ MÃºsica ON/OFF
function toggleAudio(){
  const a=document.getElementById('bgm');
  a.muted=!a.muted;
  document.querySelector('.audio-toggle').textContent=a.muted?"ðŸ”ˆ":"ðŸ”Š";
}

// ðŸ“ˆ GRÃFICO REALTIME
const ctx=document.getElementById('humChart').getContext('2d');
let dataPoints=[1,2,3,4,5].map(()=>Math.random()*20);

const chart=new Chart(ctx,{
  type:"line",
  data:{
    labels:dataPoints.map((_,i)=>i),
    datasets:[{
      label:"HUM DistribuÃ­do (%)",
      data:dataPoints,
      borderWidth:2
    }]
  },
  options:{
    animation:false,
    scales:{y:{min:0,max:100}}
  }
});

// SimulaÃ§Ã£o enquanto backend nÃ£o estÃ¡ pÃºblico
setInterval(async()=>{
  try{
    let v = Math.random()*100; // substitui por fetch("/hum/status")
    dataPoints.push(v);
    if(dataPoints.length>20) dataPoints.shift();
    chart.data.labels=dataPoints.map((_,i)=>i);
    chart.data.datasets[0].data=dataPoints;
    chart.update();
  }catch(e){}
},3000);

// ðŸ’» TERMINAL SECRETO
const terminal=document.getElementById("terminal");
const output=document.getElementById("term-output");
const input=document.getElementById("term-input");

document.addEventListener("keydown",e=>{
  if(e.key==="~"){ terminal.classList.toggle("hidden"); input.focus(); }
});

input.addEventListener("keydown",e=>{
  if(e.key==="Enter"){
    const cmd=input.value.trim();
    output.textContent+=`\n> ${cmd}`;
    if(cmd==="help") output.textContent+=`\ncomandos: help, supply, hum, exit`;
    else if(cmd==="supply") output.textContent+=`\nTotal: 80,000,000 HUM`;
    else if(cmd==="hum") output.textContent+=`\nDistribuÃ­do: ${dataPoints.at(-1).toFixed(2)}%`;
    else if(cmd==="exit") terminal.classList.add("hidden");
    else output.textContent+=`\nComando desconhecido.`;
    input.value="";
    output.scrollTop=output.scrollHeight;
  }
});

// âœ¨ Scroll Animations
const slides=document.querySelectorAll(".slide");
const ob=new IntersectionObserver(es=>es.forEach(e=>e.isIntersecting&&e.target.classList.add("show")));
slides.forEach(s=>ob.observe(s));
</script>

</body>
</html>
